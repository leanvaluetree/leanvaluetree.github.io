<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{ title or metadata.title }}</title>
    <meta name="description" content="{{ description or metadata.description }}">
    <meta name="robots" content="index,follow,max-video-preview:-1,max-snippet:-1,max-image-preview:large, max-video-preview:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="theme-color" content="#FFFFFF">
    <meta name="msapplication-navbutton-color" content="#FFFFFF">
    <meta name="apple-mobile-web-app-status-bar-style" content="#FFFFFF">
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />


    <script>
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'has-js ';
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    {%- set style -%}
      {%- include "css/reset.css" -%}
      {%- include "css/type-scale.css" -%}
      {%- include "css/main.css" -%}
      {%- include "css/landing.css" -%}
      {%- include "css/tool.css" -%}
    {%- endset -%}
    <style>{{ style | cssmin | safe }}</style>
  </head>
  <body itemscope itemtype="http://schema.org/WebPage" {% if page.url != '/' %} class="loading-overlay" {% endif %}>
    {% if page.url != '/' %}
    <div class="overlay">
      <img class="logo" src="/images/logo.svg">
      <div class="loading-progress"></div>
    </div>
    {% endif %}
    <header class="container pt-5 pb-2">
      {% if  page.url == '/'%}
        <div class="line"></div>
        <a href="/" class="text-dark text-uppercase">secret validation society</a>
      {% else %}
        <svg width="40" height="20" viewBox="0 0 40 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="1.66667" height="38.3333" transform="matrix(4.37114e-08 1 1 -4.37114e-08 1.66699 9.16602)" fill="#201D25"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M9.16634 0C9.16634 5.06261 5.06228 9.16667 -0.000326157 9.16667V10.8333C5.98276 10.8333 10.833 5.98309 10.833 0H9.16634Z" fill="#201D25"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M9.16634 20C9.16634 14.9374 5.06228 10.8333 -0.000326157 10.8333V9.16667C5.98276 9.16667 10.833 14.0169 10.833 20H9.16634Z" fill="#201D25"/>
        </svg>
        &nbsp;&nbsp;
        <a href="/" class="text-dark">Tutti i workshop</a>
      {% endif %}
    </header>

    <main id="content" class="pt-5">
      {{ content | safe }}
    </main>

    {% if page.url == '/' %}
      <hr>

      <footer class="container pt-5">
        <div class="row">
          <div class="col-md-6">
            IL PROGETTO
          </div>
          <div class="col-md-6">
            Secret Validation Society nasce dal genio di Cavucci e Fightbean che hanno dato vita insieme ad un portale in cui riportare tutti i fantastici workshop che potranno tornare utili anche a te! SÃ¬, proprio a te!
          </div>
        </div>
      </footer>
    {% endif %}

    {# <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> #}
    {# <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script> #}
    {# <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script> #}
    {# <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script> #}
    {% if page.url == '/' %}
    {# <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.5/lottie.min.js" integrity="sha512-0bCDSnaX8FOD9Mq8WbHcDwshXwCB5V4EP+UBu87WQgga2b7lAsuEbaSmIZjH/XEmNhJuhrPbFHemre5HZwrk9w==" crossorigin="anonymous"></script> #}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.5/lottie_light_html.min.js" integrity="sha512-YDmvCqWiji8aPW4jK1hSytdWri58Ar4EPWSSD+wwWK8OKy99dUUYgbWhaU/heui162mdVrdWhqm9yLbzOkzEOA==" crossorigin="anonymous"></script>
    <script type="text/javascript">
    var textWrapper = document.querySelector('.hero');
    textWrapper.innerHTML = textWrapper.textContent.replace(/\w+/g, "<span class='word animate__animated animate__fadeInUp'>$&</span>");
    {# textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='word animate__animated animate__fadeInUp'>$&</span>"); #}

    {%- for tool in tools -%}
    bodymovin.loadAnimation({
      container: document.getElementById('{{tool.normalized}}'),
      path: 'animations/{{tool.normalized}}.json',
      renderer: 'svg', // Required
      loop: true,
      autoplay: true,
      name: '{{tool.normalized}}',
      onComplete: console.log
    })
    {% endfor %}
    </script>
    {% endif%}

    {% if page.url != '/' %}
    <script type="text/javascript">
      setTimeout(() => {
        document.body.classList.remove('loading-overlay')
        document.querySelector('.overlay').remove()
      }, 1000)
      const nextPageTrigger = document.querySelector('.nextpage-trigger')
      if (nextPageTrigger) {
        let scrolled = false
        document.addEventListener('scroll', debounce(() => {
          if (isElementInViewport(nextPageTrigger) && scrolled) {
            window.location = nextPageTrigger.getAttribute('data-url')
          }
          scrolled = true
        }, 100))
      }
      function isElementInViewport (el) {
          var rect = el.getBoundingClientRect();

          return (
              rect.top >= 0 &&
              rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) + rect.height
          );
      }
      function debounce(func, wait, immediate) {
        var timeout;
        return function() {
          var context = this, args = arguments;
          var later = function() {
            timeout = null;
            if (!immediate) func.apply(context, args);
          };
          var callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
          if (callNow) func.apply(context, args);
        };
      };

    </script>
    {% endif%}
  </body>
</html>